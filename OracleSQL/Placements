Score:40|Diff:Medium

SELECT NAME FROM 
(SELECT OWN.ID ID,OWN.NAME NAME,OWN.SAL SAL,OWN.FID FID,STU.NAME FNAME,PACK.SALARY FSAL 
 FROM 
 (SELECT S.ID ID,S.NAME NAME,P.SALARY SAL,F.FRIEND_ID FID 
  FROM STUDENTS S, FRIENDS F, PACKAGES P 
  WHERE S.ID=P.ID AND S.ID=F.ID) OWN, STUDENTS STU, PACKAGES PACK 
 WHERE FID=STU.ID AND FID=PACK.ID 
 ORDER BY OWN.ID) 
WHERE FSAL>SAL 
ORDER BY FSAL;
